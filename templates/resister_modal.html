
<style id="modal_css">

.modal-window {
-webkit-transform: translate(0, 100%);
-moz-transform: translate(0, 100%);
-o-transform: translate(0, 100%);
-ms-transform: translate(0, 100%);
transform: translate(0, 100%);
-webkit-transform: translate3d(0, 100%, 0);
transform: translate3d(0, 100%, 0);
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
z-index: 999;
opacity: 0;
line-height: 1.3;
display: none\9;
}
.modal-window:target {
-webkit-transform: translate(0, 0);
-moz-transform: translate(0, 0);
-o-transform: translate(0, 0);
-ms-transform: translate(0, 0);
transform: translate(0, 0);
opacity: 1;
}
.is-active.modal-window {
display: block\9;
}
.modal-window:target {
display: block\9;
}
.modal-window .modal-inner {
position: absolute;
top: 50px;
left: 50%;
z-index: 20;
margin-left: -325px;
width: 650px;
overflow-x: hidden;
border-radius: 2px;
background: #fff;
-webkit-box-shadow: 0 0 30px rgba(0, 0, 0, 0.6);
box-shadow: 0 0 30px rgba(0, 0, 0, 0.6);
}
.modal-window .modal-inner p {
padding: 0 20px;
}
.modal-window .modal-close {
display: block;
text-indent: -100px;
overflow: hidden;
}
.modal-window .modal-close:before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
z-index: 10;
background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAEElEQVR42gEFAPr/AAAAAMwA0QDNTiUx4gAAAABJRU5ErkJggg==");
}
.modal-window .modal-close:after {
content: '\00d7';
position: absolute;
top: 25px;
left: 50%;
z-index: 20;
margin-left: 285px;
background: #fff;
border-radius: 2px;
padding: 2px 8px;
font-size: 1.2em;
text-decoration: none;
text-indent: 0;
}
.modal-window {
-webkit-transition: opacity 0.4s;
-o-transition: opacity 0.4s;
transition: opacity 0.4s;
}
</style>

<script type='text/javascript' id="post-script">
function call_test(){
    alert('at call_test()');
}
/* 生成フォーム用JavaScript */
function post_pass_data(){
    var username = document.getElementById("modal-username");
    if (username.value == '') {
        alert('Username must be filled');
        return false;
    }
    //get form values
    var formdata = new FormData();
    formdata.append('username',username.value);
    formdata.append('url',String(location.href));
    //conditions
    formdata.append('Upper',String(document.getElementById("Upper").checked));
    formdata.append('Lower',String(document.getElementById("Lower").checked));
    formdata.append('Symbol',String(document.getElementById("Symbol").checked));
    formdata.append('Number',String(document.getElementById("Number").checked));
    formdata.append('Max',String(document.getElementById('max').value));

    var xhr = new XMLHttpRequest();
    // データが正常に送信された場合に行うことを定義します
    xhr.addEventListener('load', function(event) {
        var authdata = JSON.parse(xhr.responseText);
        if (authdata['response'] == 'exists') {
            alert("Already Exists");
            return false;
        }

        // auto fill login parameters 
        var username_id = '';
        var password_id = '';
        if ('username_id' in authdata) {
            username_id = authdata['username_id'];
        } else if ('username_name' in authdata) {
            username_id = authdata['username_name'];
        } else {
            alert('IDError: not found');
            return false;
        }
        if ('password_id' in authdata) {
            password_id = authdata['password_id'];
        } else if ('password_name' in authdata) {
            password_id = authdata['password_name'];
        } else {
            alert('IDError: not found');
            return false;
        }

        var user = document.getElementById(username_id);
        var pswd = document.getElementById(password_id);
        user.value = authdata['username'];
        pswd.value = authdata['password'];
    });
    // エラーが発生した場合に行うことを定義します
    xhr.addEventListener('error', function(event) {
        alert('Oups! Something goes wrong.');
    });

    xhr.open('POST','https://localhost:8000/gen-pass');
    xhr.send(formdata);
}
document.addEventListener('keypress', function(event) {
    if (event.keyCode === 13) {
        post_pass_data();
    }
});
</script>

<section class="modal-window" id="modal-p01">
<div class="modal-inner" class="modal-wrap a-center">

<p>
<a >ユーザ名</a><br>
<input type="text" name="example1" value="" size="30" id="modal-username"><br>

<a >パスワードに含む文字</a><br>
<input type="checkbox" name="example5" value="val1" checked="checked" id="Upper">大文字　<input type="checkbox" name="example5" value="val2" id="Lower">小文字　<input type="checkbox" name="example5" value="val3" id="Symbol">記号　<input type="checkbox" name="example5" value="val4" id="Number">数字<br>

<a >文字数</a><br>
<input type="text" name="example1" value="0" size="5" id="min">文字以上
<a ></a>
<input type="text" name="example1" value="15" size="5" id="max">文字以下<br>
<a >ボタン</a>
<br>
<input type="button" value="登録する" onClick="post_pass_data()">
</div>
<a href="#!" class="modal-close">&times;</a>
</section>
